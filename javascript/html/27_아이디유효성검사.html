<!DOCTYPE html>
<html lang="kor">
  <head>
    <meta charset="utf-8" />
    <title>아이디 유효성 검사</title>
    <style>
      .check {
        color: green;
      }

      .error {
        color: red;
      }
    </style>
  </head>
  <body>
    <h2>아이디 유효성 검사</h2>
    <form action="#" name="idForm">
      <h3>아이디</h3>
      <input type="text" class="id-input" id="inputID" name="user_id" />
      <br />
      <span class="input-result">영어, 숫자로만 6 ~ 16 글자 안으로</span>
    </form>

    <script>
      const checkList = {
        inputID: false,
      };

      const inputID = document.querySelector("#inputID");

      inputID.addEventListener("input", (e) => {
        const value = e.target.value;
        const span = e.target.nextElementSibling.nextElementSibling;

        if (value.trim().length == 0) {
          span.textContent = "영어, 숫자로만 6 ~ 16 글자 안으로";

          span.classList.remove("check", "error");
          e.target.value = "";

          checkList["inputID"] = false;
          return;
        }

        const regExp = /^[A-Za-z0-9]{6,16}$/;

        if (regExp.test(value)) {
          span.textContent = "유효한 형식의 아이디입니다.";
          span.classList.add("check");
          span.classList.remove("error");
          checkList["inputID"] = true;
        } else {
          span.textContent = "유효하지 않은 형식의 아이디입니다.";
          span.classList.add("error");
          span.classList.remove("check");
          checkList["inputID"] = false;
        }
      });
    </script>
  </body>
</html>
